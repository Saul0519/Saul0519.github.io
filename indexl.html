<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>자동화설비 랜덤 퀴즈</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#6ee7b7; --muted:#9aa6b2;
      --glass: rgba(255,255,255,0.03);
      font-family: "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      background:linear-gradient(180deg,#071022 0%,#081428 55%,#071124 100%);
      color:#e6eef6; display:flex; justify-content:center;
      padding:36px;
    }
    .wrap{
      width:100%; max-width:980px; background:rgba(255,255,255,0.02);
      border-radius:12px; padding:20px;
      box-shadow:0 8px 30px rgba(2,6,23,0.7);
      border:1px solid rgba(255,255,255,0.03);
    }
    header{display:flex; align-items:center; gap:16px; margin-bottom:12px}
    header h1{font-size:20px; margin:0}
    .controls{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-bottom:18px;
    }
    label{font-size:13px; color:var(--muted)}
    select,input[type="number"]{
      background:var(--glass); border:1px solid rgba(255,255,255,0.04);
      color:inherit; padding:8px 10px; border-radius:8px; min-width:140px;
    }
    .btn{
      background:linear-gradient(90deg,var(--accent),#34d399);
      color:#042018; border:none; padding:10px 14px;
      border-radius:9px; cursor:pointer; font-weight:700;
    }
    .quiz-area{display:grid; gap:12px; grid-template-columns:1fr; margin-top:8px}
    .card{
      background:rgba(255,255,255,0.02); padding:14px;
      border-radius:10px; border:1px solid rgba(255,255,255,0.03);
    }
    .q{padding:12px; border-radius:8px;
      background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(0,0,0,0.03));}
    .opts{display:flex; flex-direction:column; gap:8px; margin-top:8px}
    .opt{
      display:flex; gap:10px; align-items:center; padding:8px;
      border-radius:8px; cursor:pointer;
      background:rgba(255,255,255,0.01);
      border:1px solid rgba(255,255,255,0.02);
    }
    .opt input{accent-color:var(--accent)}
    .notice{font-size:13px; color:#ffd9a8}
    .tag{background:rgba(255,255,255,0.03); padding:6px 8px;
      border-radius:6px; font-size:12px; color:var(--muted)}
    .small{font-size:13px; color:var(--muted)}
    .correct{border-left:4px solid #34d399}
    .wrong{border-left:4px solid #ff7a7a}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>자동화설비 랜덤 퀴즈</h1>
        <div class="small">문제는 매번 랜덤으로 출제됩니다.</div>
      </div>
    </header>

    <section class="controls card">
      <div style="display:flex; gap:12px; flex-wrap:wrap;">
        <div>
          <label for="difficulty">난이도</label><br>
          <select id="difficulty">
            <option value="easy">쉬움</option>
            <option value="normal" selected>보통</option>
            <option value="hard">어려움</option>
          </select>
        </div>

        <div>
          <label for="count">문제 수</label><br>
          <input id="count" type="number" min="1" max="50" value="10" />
        </div>

        <div>
          <label for="shuffle">보기 섞기</label><br>
          <select id="shuffle">
            <option value="yes" selected>예</option>
            <option value="no">아니오</option>
          </select>
        </div>

        <div style="display:flex; align-items:center;">
          <button id="generate" class="btn">문제 생성</button>
        </div>
      </div>

      <div style="margin-top:10px;" class="notice">모든 문제는 4지선다 객관식입니다.</div>
    </section>

    <main id="quiz" class="quiz-area"></main>

    <div style="display:flex; justify-content:space-between; margin-top:14px;">
      <div class="small">문제를 풀고 채점 버튼을 누르세요.</div>
      <div style="display:flex; gap:8px;">
        <button id="check" class="btn" disabled>채점</button>
        <button id="regen" class="btn" style="background:linear-gradient(90deg,#f97316,#fb923c)" disabled>다시 출제</button>
      </div>
    </div>
  </div>

  <script>
    const QUESTION_BANK = [{ id: 1, difficulty: "easy", q: "건조한 공기의 성질로 올바른 것은?", choices: ["무색·무미·무취", "푸른색", "약한 냄새가 있음", "끈적거림 있음"], a: 0, explain: "건조한 공기는 무색·무미·무취이다." },

{ id: 2, difficulty: "easy", q: "습한 공기를 압축할 때 발생하며 제거해야 하는 것은?", choices: ["드레인", "전류", "산소", "기름"], a: 0, explain: "습공기를 압축하면 드레인이 발생해 장비에 문제를 일으킨다." },

{ id: 3, difficulty: "easy", q: "공기압 에너지원의 장점이 아닌 것은?", choices: ["압축공기 공급이 쉬움", "환경 오염이 적음", "보관성 우수", "정밀 속도 조정이 쉬움"], a: 3, explain: "공기압은 정밀 속도 조정이 어렵다." },

{ id: 4, difficulty: "easy", q: "공기압 에너지의 단점으로 맞는 것은?", choices: ["속도 제어 어려움", "소음 없음", "압축성 낮음", "큰 힘 얻기 쉬움"], a: 0, explain: "공기압은 속도 조절이 정밀하지 않다." },

{ id: 5, difficulty: "easy", q: "습공기 제거 과정에서 가장 중요한 목적은?", choices: ["녹 발생 방지", "색깔 보정", "향 생성", "압력 감소"], a: 0, explain: "습기가 있으면 녹과 고장이 발생해 제거가 필요하다." },

{ id: 6, difficulty: "easy", q: "공기압의 일반적 사용 압력 범위는?", choices: ["4~6 kgf/cm²", "10~12 kgf/cm²", "1~2 kgf/cm²", "6~9 kgf/cm²"], a: 0, explain: "산업용 공기압은 보통 4~6 kgf/cm²를 사용한다." },

{ id: 7, difficulty: "easy", q: "공기압 발생부 구성요소가 아닌 것은?", choices: ["압축기", "냉각기", "탱크", "센서 릴레이"], a: 3, explain: "센서 릴레이는 제어부에 가까운 구성이다." },

{ id: 8, difficulty: "easy", q: "압축 공기에서 불순물을 걸러주는 장치는?", choices: ["필터", "릴레이", "센서", "시퀀서"], a: 0, explain: "필터는 수분과 먼지 같은 불순물을 제거한다." },

{ id: 9, difficulty: "easy", q: "ISO1219에서 공급 포트의 기호는?", choices: ["P", "A", "X", "R"], a: 0, explain: "ISO1219에서 P는 공급 포트이다." },

{ id: 10, difficulty: "easy", q: "밸브의 전환 위치는 무엇으로 표시하는가?", choices: ["사각형", "원", "삼각형", "선"], a: 0, explain: "밸브의 전환 위치는 사각형으로 나타낸다." },

{ id: 11, difficulty: "easy", q: "솔레노이드 밸브는 어떤 힘으로 작동되는가?", choices: ["전자석", "공기저항", "온도", "광센서"], a: 0, explain: "솔레노이드는 전자석의 힘을 이용한다." },

{ id: 12, difficulty: "easy", q: "직접 작동형 솔레노이드 밸브의 특징이 아닌 것은?", choices: ["소용량", "단가 저렴", "고장률 낮음", "대용량 취급"], a: 3, explain: "대용량은 간접 작동형의 특징이다." },

{ id: 13, difficulty: "easy", q: "OR 기능을 하는 밸브는?", choices: ["셔틀 밸브", "체크 밸브", "스풀 밸브", "릴리프 밸브"], a: 0, explain: "셔틀밸브는 OR 동작을 수행한다." },

{ id: 14, difficulty: "easy", q: "교축 밸브는 무엇을 조절하는가?", choices: ["유량", "전압", "전류", "온도"], a: 0, explain: "교축 밸브는 대표적인 유량 조절 밸브이다." },

{ id: 15, difficulty: "easy", q: "단동 실린더의 복귀 방식은?", choices: ["스프링", "압력", "유압", "전동"], a: 0, explain: "단동 실린더는 스프링으로 복귀한다." },

{ id: 16, difficulty: "easy", q: "PLC 장점으로 옳은 것은?", choices: ["접점 마모 없음", "전력 소모 큼", "속도 느림", "보수 어려움"], a: 0, explain: "PLC는 접점 마모가 없어 신뢰성이 높다." },

{ id: 17, difficulty: "easy", q: "PLC 단점은?", choices: ["초기 비용 높음", "마모 잦음", "속도 느림", "논리 연산 불가"], a: 0, explain: "PLC는 초기 구입 비용이 높다." },

{ id: 18, difficulty: "easy", q: "FBD는 어떤 종류의 프로그래밍인가?", choices: ["블록 기반", "문장 기반", "음성 인식 기반", "회로 기반"], a: 0, explain: "FBD는 블록 기반 그래픽 언어이다." },

{ id: 19, difficulty: "easy", q: "하강 펄스 접점은 신호가 어떻게 될 때 동작하는가?", choices: ["OFF 되는 순간", "ON 되는 순간", "ON 유지 중", "스캔 종료 시"], a: 0, explain: "하강펄스는 신호가 OFF되는 순간 동작한다." },

{ id: 20, difficulty: "easy", q: "출력 상태를 외부로 내보내는 PLC 요소는?", choices: ["출력 코일", "접점", "릴레이", "램프"], a: 0, explain: "출력 코일은 실제 출력 신호를 보낸다." },

{ id: 21, difficulty: "easy", q: "지속적으로 작동하는 코일은?", choices: ["세트 출력 코일", "일반 코일", "타이머", "카운터"], a: 0, explain: "Set 코일은 래치처럼 지속 동작한다." },

{ id: 22, difficulty: "easy", q: "리셋 코일의 역할은?", choices: ["세트 코일을 해제", "전압 증가", "속도 조절", "밸브 열기"], a: 0, explain: "리셋 코일은 Set 코일을 해제한다." },

{ id: 23, difficulty: "easy", q: "A 접점은 평상시 어떻게 되어 있는가?", choices: ["개방", "폐쇄", "반쯤 열림", "없음"], a: 0, explain: "A 접점은 평상시 개방되어 있다." },

{ id: 24, difficulty: "easy", q: "SM409의 특징은?", choices: ["0.01초 클록", "1초 유지", "전원 상시 ON", "외부 입력"], a: 0, explain: "SM409는 0.01초 단위 클록이다." },

{ id: 25, difficulty: "easy", q: "데이터 전송 명령의 기능은?", choices: ["S 값을 D로 복사", "D값 삭제", "D값 증가", "난수 생성"], a: 0, explain: "데이터 전송은 S→D 복사이다." },

{ id: 26, difficulty: "normal", q: "공기압과 유압의 비교에서 속도 제어가 좋은 것은?", choices: ["유압", "공기압", "둘 다 동일", "상황에 따라 다름"], a: 0, explain: "유압은 속도 제어가 우수하다." },

{ id: 27, difficulty: "normal", q: "압축 공기 필터의 역할이 아닌 것은?", choices: ["윤활 공급", "불순물 제거", "압력 안정", "수분 제거"], a: 0, explain: "윤활은 루브리케이터의 기능이다." },

{ id: 28, difficulty: "normal", q: "ISO 5599에서 작업 포트 번호는?", choices: ["2,4,6", "1", "3,5,7", "10,12"], a: 0, explain: "작업 포트는 2,4,6이다." },

{ id: 29, difficulty: "normal", q: "밸브의 방향을 나타내는 기호는?", choices: ["화살표", "사각형", "점선", "원"], a: 0, explain: "화살표는 흐름 방향을 나타낸다." },

{ id: 30, difficulty: "normal", q: "간접 작동형 밸브의 파일럿 역할은?", choices: ["주 밸브 구동", "온도 조절", "압력 해제", "전류 차단"], a: 0, explain: "파일럿 밸브가 먼저 움직여 주 밸브를 작동시킨다." },

{ id: 31, difficulty: "normal", q: "셔틀 밸브는 몇 개의 출구를 가지는가?", choices: ["1개", "2개", "3개", "4개"], a: 0, explain: "셔틀 밸브는 OR 기능이므로 출구는 1개다." },

{ id: 32, difficulty: "normal", q: "단동 실린더의 대표적 용도가 아닌 것은?", choices: ["회전 제어", "클램핑", "이젝팅", "프레싱"], a: 0, explain: "회전 제어는 단동 실린더의 기능이 아니다." },

{ id: 33, difficulty: "normal", q: "PLC에서 타이머·카운터 연산이 가능한 이유는?", choices: ["프로그램 기반", "기계식 접점", "전압 분배", "공압 제어"], a: 0, explain: "PLC는 프로그램으로 논리 실행이 가능하다." },

{ id: 34, difficulty: "normal", q: "PLC 제조사마다 다른 것은?", choices: ["소프트웨어", "기압", "전선 색깔", "릴레이"], a: 0, explain: "PLC는 제조사마다 소프트웨어가 다르다." },

{ id: 35, difficulty: "normal", q: "R08CPU의 프로그램 메모리 용량은?", choices: ["320K", "640K", "80K", "5M"], a: 0, explain: "R08CPU의 프로그램 메모리는 320K이다." },

{ id: 36, difficulty: "normal", q: "PLC 처리 과정의 첫 단계는?", choices: ["프로그램 작성", "전송", "변환", "수정"], a: 0, explain: "처리는 프로그램 작성 → 변환 → 수정 → 전송 → 실행 순이다." },

{ id: 37, difficulty: "normal", q: "세트 코일이 지속되는 이유는?", choices: ["래치 기능", "속도 때문", "압력 고정", "전원 증가"], a: 0, explain: "Set 코일은 래치처럼 유지된다." },

{ id: 38, difficulty: "normal", q: "SM405의 특징은?", choices: ["RUN 후 1스캔만 OFF", "0.01초 클록", "0.1초 클록", "전원 상시 ON"], a: 0, explain: "SM405는 RUN 후 1스캔만 OFF 된다." },

{ id: 39, difficulty: "normal", q: "데이터 시프트 명령은 무엇을 하는가?", choices: ["왼쪽으로 자리 이동", "더하기", "곱하기", "전송"], a: 0, explain: "시프트는 비트나 자릿수를 이동한다." },

{ id: 40, difficulty: "normal", q: "정지 레오나드 방식은 무엇을 이용하는가?", choices: ["사이리스터", "공기압", "유압펌프", "릴레이"], a: 0, explain: "SCR(사이리스터)로 직류 전압을 제어한다." },

{ id: 41, difficulty: "normal", q: "정지 레오나드 방식의 주요 용도는?", choices: ["고속 엘리베이터", "펌프 제어", "공기 정화", "조명 제어"], a: 0, explain: "고속 엘리베이터에 사용된다." },

{ id: 42, difficulty: "normal", q: "유압 제어가 공기압보다 좋은 점은?", choices: ["큰 힘 발생", "소음 적음", "가격 낮음", "무게 가벼움"], a: 0, explain: "유압은 큰 힘을 낼 수 있다." },

{ id: 43, difficulty: "normal", q: "공기압의 응답성은 어느 정도인가?", choices: ["중", "대", "소", "초대"], a: 0, explain: "공기압 응답성은 ‘중’ 수준이다." },

{ id: 44, difficulty: "normal", q: "PLC가 유지보수에 유리한 이유는?", choices: ["프로그램 수정 쉬움", "스프링 작동", "공압 사용", "배관 없음"], a: 0, explain: "PLC는 프로그램으로 즉각 수정 가능하다." },

{ id: 45, difficulty: "normal", q: "루브리케이터의 역할은?", choices: ["윤활 공급", "압력 상승", "전류 감소", "유량 차단"], a: 0, explain: "루브리케이터는 윤활제를 공급한다." },

{ id: 46, difficulty: "normal", q: "ISO5599에서 제어 포트 번호는?", choices: ["10,12,14", "1", "2,4,6", "3,5"], a: 0, explain: "제어 포트는 10,12,14이다." },

{ id: 47, difficulty: "normal", q: "A접점이 닫히는 조건은?", choices: ["ON 시", "OFF 시", "전원 차단 시", "스캔 시작 시"], a: 0, explain: "A접점은 동작 시 닫힌다." },

{ id: 48, difficulty: "normal", q: "PLC에서 외부 노이즈 대응이 필요한 이유는?", choices: ["오동작 방지", "전력 증가", "속도 향상", "메모리 감소"], a: 0, explain: "노이즈는 오동작을 유발할 수 있다." },

{ id: 49, difficulty: "normal", q: "R16CPU의 데이터 메모리 용량은?", choices: ["10M", "5M", "1M", "640K"], a: 0, explain: "R16CPU 데이터 메모리는 10MB이다." },

{ id: 50, difficulty: "normal", q: "0.1초 클록 기능을 가진 특수릴레이는?", choices: ["SM410", "SM404", "SM405", "SM409"], a: 0, explain: "SM410은 0.1초 클록 신호를 발생한다." },

{ id: 51, difficulty: "normal", q: "공기압에서 유량 조절을 위해 사용하는 밸브는?", choices: ["니들 밸브", "체크 밸브", "릴리프 밸브", "셔틀 밸브"], a: 0, explain: "니들 밸브는 유량을 세밀하게 조절한다." },

{ id: 52, difficulty: "normal", q: "체크 밸브의 기능은?", choices: ["역류 방지", "유량 증가", "압력 해제", "속도 조절"], a: 0, explain: "체크 밸브는 역류를 방지한다." },

{ id: 53, difficulty: "normal", q: "공기압 시스템에서 소음이 발생하는 주요 원인은?", choices: ["배기", "공급 압력", "유량 부족", "전선 손상"], a: 0, explain: "배기 시 공기가 대기와 만나 소음이 발생한다." },

{ id: 54, difficulty: "normal", q: "PLC의 스캔 순서가 아닌 것은?", choices: ["입력 읽기", "논리 실행", "출력 갱신", "압력 측정"], a: 3, explain: "압력 측정은 스캔 순서와 무관하다." },

{ id: 55, difficulty: "normal", q: "공기압 회로도에서 방향 전환을 의미하는 기호는?", choices: ["화살표", "원", "삼각형", "점"], a: 0, explain: "화살표는 유로의 방향을 의미한다." },

{ id: 56, difficulty: "normal", q: "릴리프 밸브의 역할은?", choices: ["압력 과승 방지", "역류 방지", "유량 감소", "전압 조절"], a: 0, explain: "릴리프 밸브는 압력이 일정 수준 이상 올라가는 것을 막는다." },

{ id: 57, difficulty: "normal", q: "솔레노이드 밸브의 플런저는 무엇에 의해 움직이는가?", choices: ["자기력", "공기압", "유압", "중력"], a: 0, explain: "솔레노이드는 자기력을 이용해 플런저를 이동시킨다." },

{ id: 58, difficulty: "normal", q: "단동 실린더가 복귀할 때 사용하는 힘은?", choices: ["스프링력", "공기압력", "유압력", "중력"], a: 0, explain: "스프링이 실린더를 복귀시킨다." },

{ id: 59, difficulty: "normal", q: "실린더의 속도 조절은 보통 어떤 밸브로 하는가?", choices: ["유량 조절 밸브", "릴리프 밸브", "게이트 밸브", "역류 밸브"], a: 0, explain: "유량 조절 밸브로 실린더의 속도를 제어한다." },

{ id: 60, difficulty: "normal", q: "공기압 회로에서 압력단계를 구분하는 기준은?", choices: ["압력 레벨", "전압", "유량", "길이"], a: 0, explain: "공압은 압력 레벨로 나눈다." },

{ id: 61, difficulty: "normal", q: "전환 위치를 둘로 가지는 밸브는?", choices: ["2포지션 밸브", "3포지션 밸브", "4포지션", "5포지션"], a: 0, explain: "전환 위치 2개 = 2포지션." },

{ id: 62, difficulty: "normal", q: "‘X’와 ‘Y’는 ISO1219에서 무엇을 의미하는가?", choices: ["제어 포트", "공급 포트", "배기 포트", "작업 포트"], a: 0, explain: "X,Y는 제어 포트 기호이다." },

{ id: 63, difficulty: "normal", q: "PLC에서 1스캔 동안만 ON되는 신호는?", choices: ["펄스 신호", "A접점", "B접점", "세트 코일"], a: 0, explain: "펄스 신호는 한 스캔 동안만 유지된다." },

{ id: 64, difficulty: "normal", q: "타이머의 누적 시간이 리셋되는 조건은?", choices: ["코일 OFF", "코일 ON", "전원 투입", "출력 신호 변화"], a: 0, explain: "타이머 코일 OFF 시 누적 시간이 리셋된다." },

{ id: 65, difficulty: "normal", q: "카운터가 증가하는 조건은?", choices: ["입력 신호 ON", "입력 신호 OFF", "주기적 변화", "저항 감소"], a: 0, explain: "카운터는 입력 신호가 ON될 때 증가한다." },

{ id: 66, difficulty: "normal", q: "공기압 실린더의 스트로크 길이를 늘리려면?", choices: ["실린더 길이 증가", "압력 증가", "유량 감소", "배관 길이 증가"], a: 0, explain: "스트로크는 실린더 구조 길이를 키워야 한다." },

{ id: 67, difficulty: "normal", q: "공기압에서 주로 사용하는 단위는?", choices: ["kgf/cm²", "V", "A", "Hz"], a: 0, explain: "압력 단위는 보통 kgf/cm²를 사용한다." },

{ id: 68, difficulty: "normal", q: "파일럿 작동에 필요한 신호는?", choices: ["압력", "전압", "전류", "온도"], a: 0, explain: "파일럿은 공기압을 이용해 핵심 밸브를 움직인다." },

{ id: 69, difficulty: "normal", q: "대용량 공기압 밸브에서 사용하는 방식은?", choices: ["간접 작동 방식", "직접 작동 방식", "유압 작동", "기계식 작동"], a: 0, explain: "대용량은 간접 작동을 쓴다." },

{ id: 70, difficulty: "normal", q: "PLC에서 메모리에 저장되는 것은?", choices: ["프로그램", "전압", "압력", "윤활제"], a: 0, explain: "PLC는 프로그램을 메모리에 저장한다." },

{ id: 71, difficulty: "normal", q: "데이터 메모리(D)의 역할은?", choices: ["수치 저장", "전류 저장", "압력 저장", "유량 저장"], a: 0, explain: "D영역은 수치를 저장한다." },

{ id: 72, difficulty: "normal", q: "연산 명령 중 더하기는?", choices: ["ADD", "SUB", "MUL", "DIV"], a: 0, explain: "ADD는 덧셈이다." },

{ id: 73, difficulty: "normal", q: "논리 회로에서 ‘AND’ 조건은?", choices: ["모두 참일 때 ON", "하나만 참일 때 ON", "반대 동작", "조건 없음"], a: 0, explain: "AND는 모두 참이어야 한다." },

{ id: 74, difficulty: "normal", q: "논리 회로에서 ‘OR’ 조건은?", choices: ["하나만 참이면 ON", "모두 참일 때만 ON", "반대 연산", "지속 연산"], a: 0, explain: "OR은 한 조건만 참이어도 ON." },

{ id: 75, difficulty: "normal", q: "PLC에서 B 접점은 무엇인가?", choices: ["평상시 닫힘", "평상시 열림", "지속 신호", "반대 신호"], a: 0, explain: "B 접점은 평상시 닫혀 있는 접점이다." },

{ id: 76, difficulty: "normal", q: "카운터가 초기화될 때 필요한 신호는?", choices: ["리셋", "세트", "펄스", "전압"], a: 0, explain: "카운터는 리셋 신호로 초기화된다." },

{ id: 77, difficulty: "normal", q: "공기압 필터에서 드레인이 고이면 나타날 수 있는 문제는?", choices: ["압력 저하", "전류 증가", "속도 증가", "윤활 과다"], a: 0, explain: "드레인 축적은 압력 저하 및 고장 원인이 된다." },

{ id: 78, difficulty: "normal", q: "윤활 공급 부족 시 발생하는 문제는?", choices: ["마찰 증가", "압력 증가", "속도 증가", "전류 감소"], a: 0, explain: "윤활이 부족하면 마찰이 증가한다." },

{ id: 79, difficulty: "normal", q: "공기압 배관에서 중요한 요소는?", choices: ["직경", "색깔", "재질색", "굵기만"], a: 0, explain: "배관 직경은 유량과 속도에 영향을 준다." },

{ id: 80, difficulty: "normal", q: "배관 직경이 좁아지면?", choices: ["유량 감소", "유량 증가", "압력 상승", "소음 감소"], a: 0, explain: "직경이 좁으면 유량은 감소한다." },

{ id: 81, difficulty: "normal", q: "스풀 밸브란?", choices: ["내부 스풀로 유로 전환하는 밸브", "바늘형 밸브", "압력 해제 밸브", "회전 밸브"], a: 0, explain: "스풀 이동으로 유로를 전환한다." },

{ id: 82, difficulty: "normal", q: "3포트 밸브 구성 요소는?", choices: ["입구·출구·배기", "A,B,C", "입구 3개", "출구 3개"], a: 0, explain: "3포트는 공급·작업·배기 3개이다." },

{ id: 83, difficulty: "normal", q: "솔레노이드의 전기적 입력은?", choices: ["코일 전류", "압력", "유량", "온도"], a: 0, explain: "코일에 전류가 흐르면 작동한다." },

{ id: 84, difficulty: "normal", q: "PLC 접점의 AND 연결은 회로에서 어떻게 표현되는가?", choices: ["직렬", "병렬", "반대", "교차"], a: 0, explain: "AND는 직렬 연결이다." },

{ id: 85, difficulty: "normal", q: "PLC 접점의 OR 연결은?", choices: ["병렬", "직렬", "역전", "대칭"], a: 0, explain: "병렬은 OR 조건." },

{ id: 86, difficulty: "normal", q: "비교 명령에서 ‘>=’의 의미는?", choices: ["크거나 같다", "작다", "같다", "작거나 같다"], a: 0, explain: ">= 는 크거나 같다." },

{ id: 87, difficulty: "normal", q: "실린더 속도 조절 시 가장 많이 고려하는 것은?", choices: ["유량", "전압", "온도", "습도"], a: 0, explain: "속도는 유량에 의해 결정된다." },

{ id: 88, difficulty: "normal", q: "공기압 장치 중 유지보수에 가장 민감한 요소는?", choices: ["필터", "배관 색깔", "기호", "도면"], a: 0, explain: "필터는 수분/먼지 제거가 필요해 관리가 중요하다." },

{ id: 89, difficulty: "normal", q: "작업 환경에서 공기압을 사용할 때 안전 조치로 맞는 것은?", choices: ["배기 소음 저감", "전압 증가", "바람세기 증대", "온도 상승"], a: 0, explain: "배기 소음은 청력 보호에 영향을 준다." },

{ id: 90, difficulty: "normal", q: "디지털 입력 신호의 상태는?", choices: ["ON/OFF", "연속값", "압력값", "아날로그"], a: 0, explain: "디지털 입력은 ON/OFF만 존재한다." },

{ id: 91, difficulty: "normal", q: "아날로그 입력의 예시는?", choices: ["온도", "스위치 ON", "릴레이 접점", "버튼 OFF"], a: 0, explain: "온도는 연속값이므로 아날로그." },

{ id: 92, difficulty: "normal", q: "SOL 밸브에서 전원이 끊기면?", choices: ["스프링 복귀", "ON 유지", "압력 상승", "유량 증가"], a: 0, explain: "전기가 끊기면 스프링으로 원위치한다." },

{ id: 93, difficulty: "normal", q: "공기압 장치에서 가장 많이 발생하는 문제는?", choices: ["누기", "과전류", "과전압", "전선 누락"], a: 0, explain: "누기는 공기압 시스템에서 가장 흔한 문제." },

{ id: 94, difficulty: "normal", q: "누기가 발생하면 시스템에 어떤 문제가 생기는가?", choices: ["압력 저하", "압력 증가", "전압 감소", "속도 증가"], a: 0, explain: "압력 낮아짐 → 동작 불안정." },

{ id: 95, difficulty: "normal", q: "공기압 실린더 내부 마찰이 증가하면 나타나는 현상은?", choices: ["속도 불안정", "속도 상승", "압력 증가", "윤활 증가"], a: 0, explain: "마찰 증가 → 움직임 불안정." },

{ id: 96, difficulty: "normal", q: "PLC OUT 코일은 무엇을 제어하는가?", choices: ["출력 장치", "입력 장치", "압력", "공기 흐름"], a: 0, explain: "OUT 코일은 실제 출력 장치를 제어한다." },

{ id: 97, difficulty: "normal", q: "프로그램 오류가 발생했을 때 가장 먼저 확인해야 할 것은?", choices: ["입출력 상태", "배관", "압력 게이지", "전구"], a: 0, explain: "입출력 상태는 가장 기본적인 체크 요소." },

{ id: 98, difficulty: "normal", q: "공기압 회로의 기초는 무엇인가?", choices: ["밸브 기호 이해", "PLC 메모리", "전류 흐름", "철 구조"], a: 0, explain: "공압에서는 기호 이해가 매우 중요하다." },

{ id: 99, difficulty: "normal", q: "수분 제거 장치는 무엇인가?", choices: ["필터 드라이어", "루브리케이터", "체크 밸브", "셔틀 밸브"], a: 0, explain: "필터 드라이어는 수분 제거용이다." },

{ id: 100, difficulty: "normal", q: "공기압 실린더의 추진력은 무엇과 관련 있는가?", choices: ["압력 × 면적", "압력 ÷ 전압", "전류 × 면적", "전압 ÷ 면적"], a: 0, explain: "추진력 = 압력 × 피스톤 면적." },

{ id: 101, difficulty: "hard", q: "공기압 시스템에서 압력 1kgf/cm² 이하를 주로 사용하는 분야는?", choices: ["프로세스 제어", "대형 프레스", "고속 실린더 제어", "배관 청소"], a: 0, explain: "저압 공기압은 프로세스 제어용으로 많이 쓴다." },

{ id: 102, difficulty: "hard", q: "ISO5599에서 작업 포트 번호가 아닌 것은?", choices: ["2", "4", "6", "8"], a: 3, explain: "8은 ISO5599에서 작업 포트 번호가 아니다." },

{ id: 103, difficulty: "hard", q: "PLC의 LD 명령이 의미하는 것은?", choices: ["논리 불러오기", "루프 동작", "레지스터 이동", "데이터 출력"], a: 0, explain: "LD는 논리 불러오기 명령(Load)." },

{ id: 104, difficulty: "hard", q: "PLC SM409 접점의 특징은?", choices: ["0.01초 클록", "1초 유지", "전원 ON시 1회만 ON", "펄스 입력 감지"], a: 0, explain: "SM409는 0.01초 단위로 ON/OFF 된다." },

{ id: 105, difficulty: "hard", q: "공기압에서 압력 손실을 가장 많이 유발하는 요소는?", choices: ["긴 배관 + 좁은 직경", "윤활 과다", "온도 상승", "밸브 수 감소"], a: 0, explain: "길고 좁은 배관은 압력 손실의 주 원인." },

{ id: 106, difficulty: "hard", q: "셔틀 밸브의 동작 원리는?", choices: ["두 입력 중 큰 압력이 출력으로 전달", "두 입력이 합쳐져 출력됨", "전기 신호로 전환", "파일럿 신호로 차단"], a: 0, explain: "OR 기능 → 더 높은 압력이 출력으로 간다." },

{ id: 107, difficulty: "hard", q: "교축 밸브와 가장 밀접한 물리적 요소는?", choices: ["유량", "전압", "저항", "자력"], a: 0, explain: "교축은 유량 제어 밸브이다." },

{ id: 108, difficulty: "hard", q: "PLC에서 프로그램이 실제 설비에 반영되는 순간은?", choices: ["출력 갱신 단계", "입력 스캔 단계", "논리 연산 단계", "시작 단계"], a: 0, explain: "출력 갱신 시 실제 장치가 움직인다." },

{ id: 109, difficulty: "hard", q: "릴레이 시퀀스 방식에 비해 PLC 방식의 가장 큰 장점은?", choices: ["유지보수 용이", "저렴함", "배선 필요 없음", "외부 노이즈 증가"], a: 0, explain: "PLC는 유지보수가 가장 쉽다." },

{ id: 110, difficulty: "hard", q: "PLC 카운터의 ‘상승 펄스 입력’이 필요한 이유는?", choices: ["중복 카운트 방지", "속도 증가", "연산 단축", "출력 증가"], a: 0, explain: "상승 펄스는 ON되는 순간만 카운트하여 중복 방지." },

{ id: 111, difficulty: "hard", q: "공기압에서 ‘드레인’이 제거되지 않을 경우 가장 먼저 발생하는 문제는?", choices: ["녹 발생", "전압 상승", "전류 부족", "유량 증가"], a: 0, explain: "수분은 녹을 발생시키고 고장의 원인이 된다." },

{ id: 112, difficulty: "hard", q: "PLC 스캔타임이 길어지면 나타나는 현상은?", choices: ["응답성 저하", "압력 저하", "배관 누기", "전압 과승"], a: 0, explain: "스캔타임이 길면 장치 응답이 느려진다." },

{ id: 113, difficulty: "hard", q: "전기-공기압 제어에서 윤활기가 필요한 이유는?", choices: ["마찰 감소", "압력 증가", "전류 보호", "밸브 수 증가"], a: 0, explain: "윤활기는 내부 마찰을 줄인다." },

{ id: 114, difficulty: "hard", q: "대용량 솔레노이드 밸브가 직접 작동하지 않는 이유는?", choices: ["코일 힘 부족", "압력 부족", "온도 영향", "배관 문제"], a: 0, explain: "코일의 자력만으로 대형 스풀을 움직일 수 없기 때문." },

{ id: 115, difficulty: "hard", q: "파일럿 포트가 필요한 이유는?", choices: ["큰 밸브를 작은 힘으로 제어", "압력 측정", "소음 감소", "온도 감지"], a: 0, explain: "작은 파일럿 압력으로 큰 밸브를 구동한다." },

{ id: 116, difficulty: "hard", q: "PLC에서 프로그램 변경 후 반드시 해야 하는 작업은?", choices: ["다운로드(전송)", "배관 점검", "압력 측정", "전구 교체"], a: 0, explain: "프로그램을 PLC로 전송해야 실제 반영된다." },

{ id: 117, difficulty: "hard", q: "실린더 속도 제어 시 ‘미터인(Meter-in)’ 방식의 특징은?", choices: ["부하 변화에 영향 큼", "속도 안정적", "유량 변화 없음", "압력 일정"], a: 0, explain: "미터인은 부하 영향이 크다." },

{ id: 118, difficulty: "hard", q: "실린더 속도 제어 시 ‘미터아웃(Meter-out)’ 방식의 특징은?", choices: ["속도 안정", "속도 불안정", "압력 변동 증가", "부하 민감"], a: 0, explain: "미터아웃은 속도가 더 안정적이다." },

{ id: 119, difficulty: "hard", q: "공기압 탱크(리시버)의 역할은?", choices: ["압력 안정 및 저장", "온도 감소", "전류 증가", "습도 증가"], a: 0, explain: "탱크는 공기의 완충 및 압력 안정화 역할." },

{ id: 120, difficulty: "hard", q: "냉각기가 필요한 이유는?", choices: ["공기 온도/수분 감소", "전압 안정화", "배관 보호", "실린더 속도 증가"], a: 0, explain: "압축 공기는 뜨겁고 습하므로 냉각해야 한다." },

{ id: 121, difficulty: "hard", q: "ISO1219에서 ‘R’ 포트의 의미는?", choices: ["배기", "공급", "작업", "제어"], a: 0, explain: "R은 배기 포트이다." },

{ id: 122, difficulty: "hard", q: "PLC에서 SET 코일이 사용하는 구조적 특징은?", choices: ["Latch 구조", "병렬 구조", "반전 회로", "타이머 연동"], a: 0, explain: "SET 코일은 래치 구조로 유지된다." },

{ id: 123, difficulty: "hard", q: "RESET 코일의 목적은?", choices: ["SET 해제", "SET 유지", "타이머 유지", "카운터 증가"], a: 0, explain: "RESET은 SET을 해제한다." },

{ id: 124, difficulty: "hard", q: "PLC에서 사용되는 D 레지스터의 주소 범례 특징은?", choices: ["데이터 저장", "전류 저장", "압력 저장", "선 길이 저장"], a: 0, explain: "D영역은 수치형 데이터 저장용." },

{ id: 125, difficulty: "hard", q: "공기압 실린더의 힘을 증가시키는 방법 중 옳은 것은?", choices: ["피스톤 직경 증가", "전류 증가", "배관 길이 증가", "스위치 증가"], a: 0, explain: "힘 = 압력 × 면적 → 직경 증가 시 힘 증가." },

{ id: 126, difficulty: "hard", q: "3포지션 밸브의 가운데 포지션이 갖는 목적은?", choices: ["중립 유지", "속도 증가", "압력 상승", "배기 강화"], a: 0, explain: "중립(Neutral) 상태를 유지한다." },

{ id: 127, difficulty: "hard", q: "공기압에서 ‘스풀 중심 위치’가 중요한 이유는?", choices: ["안전 상태 확보", "속도 증가", "유량 확대", "압력 상승"], a: 0, explain: "중심 위치는 장치의 안전 정지와 관련됨." },

{ id: 128, difficulty: "hard", q: "PLC에서 메모리 용량이 크면 얻을 수 있는 장점은?", choices: ["더 많은 프로그램 처리 가능", "전압 증가", "압력 증가", "응답성 저하"], a: 0, explain: "메모리 증가 → 더 복잡한 프로그램 저장 가능." },

{ id: 129, difficulty: "hard", q: "프로세스 제어에서 아날로그 센서를 사용하는 이유는?", choices: ["연속 값 측정", "ON/OFF 측정", "배관 길이 감소", "누기 방지"], a: 0, explain: "온도·압력·유량 등 연속값 측정용." },

{ id: 130, difficulty: "hard", q: "공기압 필터의 1차 기능은?", choices: ["불순물 제거", "전압 조절", "유량 증가", "소음 증가"], a: 0, explain: "필터는 먼지·물 제거 목적." },

{ id: 131, difficulty: "hard", q: "범용 PLC와 고성능 PLC의 차이는?", choices: ["처리속도", "전선색", "배관재질", "압력"], a: 0, explain: "고성능 PLC는 스캔타임이 빠르다." },

{ id: 132, difficulty: "hard", q: "직접 작동형 밸브가 주로 사용되는 곳은?", choices: ["소용량 회로", "대형 실린더", "대형 밸브", "전력 제어"], a: 0, explain: "직접 작동형은 작은 유량에서 사용." },

{ id: 133, difficulty: "hard", q: "간접 작동형 밸브의 장점은?", choices: ["대용량 사용 가능", "전원 필요 없음", "배관 단순", "전류 감소"], a: 0, explain: "간접형은 파일럿을 사용해 대형 밸브 구동 가능." },

{ id: 134, difficulty: "hard", q: "PLC 타이머가 정상적으로 동작하지 않을 때 가장 먼저 확인해야 할 요소는?", choices: ["입력 신호 변화", "압력", "수분", "윤활"], a: 0, explain: "타이머는 입력 신호 변화가 필수." },

{ id: 135, difficulty: "hard", q: "전기-공기압 제어 시스템의 구성요소가 아닌 것은?", choices: ["전동기", "윤활기", "압축기", "방향제어밸브"], a: 0, explain: "전동기는 구동 장비지만 공기압 제어 구성에는 포함되지 않는다." },

{ id: 136, difficulty: "hard", q: "공기압 사용 시 온도가 낮아지면 나타나는 문제는?", choices: ["수분 응축 증가", "압력 증가", "속도 증가", "윤활 증가"], a: 0, explain: "온도↓ → 응축 증가." },

{ id: 137, difficulty: "hard", q: "PLC에서 CPU 용량이 큰 모델을 사용하는 이유는?", choices: ["복잡한 제어 가능", "전류 증가", "압력 증가", "실린더 길이 증가"], a: 0, explain: "CPU 용량은 처리 성능과 관련 있음." },

{ id: 138, difficulty: "hard", q: "PLC에서 워치독 타이머의 기능은?", choices: ["오류 감시", "압력 증가", "배관 감시", "온도 유지"], a: 0, explain: "워치독 타이머는 프로그램 오류 감시용." },

{ id: 139, difficulty: "hard", q: "솔레노이드 밸브 고착의 원인이 아닌 것은?", choices: ["윤활 부족", "이물질", "전압 부족", "배관 색상"], a: 3, explain: "배관 색상은 관련 없음." },

{ id: 140, difficulty: "hard", q: "PLC에서 데이터 시프트(Shift) 명령 사용 목적은?", choices: ["비트를 이동", "전류 변화", "압력 변화", "속도 조절"], a: 0, explain: "시프트는 비트나 데이터를 이동시키는 기능." },

{ id: 141, difficulty: "hard", q: "공기압에서 소음 저감을 위해 가장 많이 쓰는 장치는?", choices: ["머플러", "루브리케이터", "셔틀 밸브", "체크 밸브"], a: 0, explain: "머플러는 배기 소음 줄이는 장치." },

{ id: 142, difficulty: "hard", q: "솔레노이드 밸브에서 발열이 심해지는 이유는?", choices: ["코일에 전류 지속 흐름", "압력 부족", "유량 부족", "수분 과다"], a: 0, explain: "코일 전류 → 발열 증가." },

{ id: 143, difficulty: "hard", q: "PLC에서 주로 사용하는 프로그래밍 언어가 아닌 것은?", choices: ["HTML", "Ladder", "FBD", "ST"], a: 0, explain: "HTML은 PLC 프로그래밍 언어가 아니다." },

{ id: 144, difficulty: "hard", q: "ON 딜레이 타이머의 특징은?", choices: ["입력이 ON 후 시간이 지나야 출력 ON", "입력 즉시 ON", "입력 OFF 후 시간 경과", "OFF 지연"], a: 0, explain: "ON 딜레이는 입력 후 일정 시간 지나야 ON." },

{ id: 145, difficulty: "hard", q: "OFF 딜레이 타이머의 특징은?", choices: ["입력 OFF 후 시간이 지나야 출력 OFF", "입력 ON 후 ON", "즉시 OFF", "펄스 유지"], a: 0, explain: "OFF 딜레이는 OFF 후 지연 동작." },

{ id: 146, difficulty: "hard", q: "압축기 토출 온도가 높으면?", choices: ["윤활유 열화", "전압 증가", "속도 증가", "카운터 증가"], a: 0, explain: "높은 온도는 윤활유를 빠르게 열화시킨다." },

{ id: 147, difficulty: "hard", q: "전기-공기압 시스템에서 센서 오작동의 주 원인은?", choices: ["노이즈", "습도", "전선 색", "배관 길이"], a: 0, explain: "노이즈는 센서 신호를 왜곡시킨다." },

{ id: 148, difficulty: "hard", q: "PLC의 기본 구성 요소가 아닌 것은?", choices: ["실린더", "CPU", "입출력부", "전원부"], a: 0, explain: "실린더는 외부 장치." },

{ id: 149, difficulty: "hard", q: "FBD의 장점은?", choices: ["흐름을 시각적으로 표현", "전압 감소", "압력 고정", "유량 증가"], a: 0, explain: "FBD는 시각적 이해에 좋다." },

{ id: 150, difficulty: "hard", q: "정지 레오나드 방식에서 속도 제어는 어떻게 하는가?", choices: ["SCR 점호각 제어", "밸브 개도 조절", "스위치 전환", "PLC 타이머"], a: 0, explain: "SCR 점호각 조절로 직류 전압을 변화시켜 속도를 조절한다." }

];

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function sampleQuestions(bank, difficulty, count) {
      let pool = bank.filter(q => {
        if (difficulty === 'easy') return q.difficulty === 'easy';
        if (difficulty === 'normal') return q.difficulty !== 'hard';
        return true;
      });
      pool = shuffleArray([...pool]);
      return pool.slice(0, Math.min(count, pool.length));
    }

    const quizEl = document.getElementById('quiz');
    const generateBtn = document.getElementById('generate');
    const countEl = document.getElementById('count');
    const diffEl = document.getElementById('difficulty');
    const checkBtn = document.getElementById('check');
    const regenBtn = document.getElementById('regen');
    const shuffleChoice = document.getElementById('shuffle');

    let currentQuestions = [];
    let userAnswers = {};

    generateBtn.addEventListener('click', () => {
      const difficulty = diffEl.value;
      let count = parseInt(countEl.value) || 10;
      createQuiz(difficulty, count);
    });

    regenBtn.addEventListener('click', () => {
      const difficulty = diffEl.value;
      let count = parseInt(countEl.value) || 10;
      createQuiz(difficulty, count);
    });

    checkBtn.addEventListener('click', () => {
      gradeQuiz();
    });

    function createQuiz(difficulty, count) {
      currentQuestions = sampleQuestions(QUESTION_BANK, difficulty, count);
      userAnswers = {};
      quizEl.innerHTML = '';

      if (currentQuestions.length === 0) {
        quizEl.innerHTML = `<div class="card small">해당 난이도의 문제가 없습니다.</div>`;
        checkBtn.disabled = true;
        regenBtn.disabled = true;
        return;
      }

      const meta = document.createElement('section');
      meta.className = 'card';
      meta.innerHTML = `
        <div style="display:flex;justify-content:space-between;">
          <div class="small">난이도: ${difficulty}</div>
          <div class="small">문제 수: ${currentQuestions.length}</div>
        </div>
      `;
      quizEl.appendChild(meta);

      currentQuestions.forEach((q, idx) => {
        const qcard = document.createElement('article');
        qcard.className = 'card q';
        qcard.id = `q-${q.id}`;

        let choices = [...q.choices].map((c, i) => ({text:c, idx:i}));

        if (shuffleChoice.value === 'yes') choices = shuffleArray(choices);
        const newCorrectIndex = choices.findIndex(c => c.idx === q.a);

        qcard.innerHTML = `
          <div style="display:flex;justify-content:space-between;">
            <div style="font-weight:700">문제 ${idx+1}</div>
            <div class="tag">${q.difficulty}</div>
          </div>
          <div style="margin-top:8px">
            <div style="font-size:15px">${q.q}</div>
            <div class="opts">
              ${choices.map((ch, cidx) => `
                <label class="opt">
                  <input type="radio" name="q_${q.id}" value="${cidx}" />
                  <div style="flex:1">${String.fromCharCode(65+cidx)}. ${ch.text}</div>
                </label>
              `).join('')}
            </div>
            <div class="explain hidden" style="margin-top:10px"></div>
          </div>
        `;
        qcard.dataset.correct = newCorrectIndex;
        qcard.dataset.explain = q.explain || '';
        quizEl.appendChild(qcard);
      });

      checkBtn.disabled = false;
      regenBtn.disabled = false;

      quizEl.querySelectorAll('input[type=radio]').forEach(r => {
        r.addEventListener('change', (e) => {
          const name = e.target.name;
          const qid = name.split('_')[1];
          userAnswers[qid] = parseInt(e.target.value);
        });
      });

      window.scrollTo({top:0, behavior:'smooth'});
    }

    function gradeQuiz() {
      let got = 0;
      const total = currentQuestions.length;

      currentQuestions.forEach((q) => {
        const qcard = document.getElementById(`q-${q.id}`);
        const corr = parseInt(qcard.dataset.correct);
        const explain = qcard.dataset.explain;
        const chosen = userAnswers[String(q.id)];
        const exEl = qcard.querySelector('.explain');

        qcard.classList.remove('correct','wrong');

        if (chosen === corr) {
          got++;
          exEl.innerHTML = `<div class="small" style="color:#aaffc2">정답 (${String.fromCharCode(65+corr)})</div><div class="small" style="margin-top:6px">${explain}</div>`;
          qcard.classList.add('correct');
        } else {
          exEl.innerHTML = `<div class="small" style="color:#ffbdbd">오답. 정답: ${String.fromCharCode(65+corr)}</div><div class="small" style="margin-top:6px">${explain}</div>`;
          qcard.classList.add('wrong');
        }
        exEl.classList.remove('hidden');
      });

      const resultCard = document.createElement('div');
      resultCard.className = 'card';
      resultCard.innerHTML = `
        <div>정답 수: ${got} / ${total}</div>
        <div class="small" style="margin-top:6px">정답률: ${Math.round((got/total)*100)}%</div>
        <button onclick="window.print()" class="btn" style="margin-top:10px;background:linear-gradient(90deg,#60a5fa,#7c3aed)">인쇄 / PDF 저장</button>
      `;

      const existing = quizEl.querySelector('.result');
      if (existing) existing.remove();
      quizEl.insertBefore(resultCard, quizEl.children[1] || null);

      checkBtn.disabled = true;
    }
  </script>
</body>
</html>
